<h3>Resumen diario</h3>
<div class="filtro-container">
  <form (ngSubmit)="filtrar()">
    <div class="campo">
      <label for="fechaInicio">Fecha Inicio:</label>
      <input
        type="date"
        id="fechaInicio"
        [(ngModel)]="filtros.fechaInicio"
        name="fechaInicio"
      />
    </div>

    <div class="campo">
      <label for="fechaFin">Fecha Fin:</label>
      <input
        type="date"
        id="fechaFin"
        [(ngModel)]="filtros.fechaFin"
        name="fechaFin"
      />
    </div>

    <div class="campo">
      <label for="usuario">Usuario:</label>
      <select id="usuario" name="usuario" [(ngModel)]="filtros.usuario">
        <option value="">Todos</option>
        <option *ngFor="let item of usuarios" [value]="item.username">
          {{ item.nombre }}
        </option>
      </select>
    </div>

    <button type="submit">Filtrar</button>
  </form>
</div>

<div class="table-wrapper">
  <table *ngIf="!cargando" class="resumen-table">
    <thead>
      <tr>
        <th rowspan="2">Fecha</th>
        <th rowspan="2">Usuario</th>
        <th rowspan="2">Total</th>
        <th rowspan="2">Cerrados</th>
        <th rowspan="2">Efectividad</th>
        <th colspan="3" class="prioridad">Prioridad</th>
        <th colspan="5" class="categoria">Atención En</th>
      </tr>
      <tr>
        <th class="prioridad">Baja</th>
        <th class="prioridad">Media</th>
        <th class="prioridad">Alta</th>
        <th class="categoria">Redes</th>
        <th class="categoria">Cómputo</th>
        <th class="categoria">Aten. Menores</th>
        <th class="categoria">Software</th>
        <th class="categoria">Diseño</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let r of diario">
        <td>{{ r.fecha_solicitud | date : "dd-MM-yyyy" }}</td>
        <td>{{ r.usuario }}</td>
        <td>{{ r.total }}</td>
        <td>{{ r.cerrados }}</td>
        <td>{{ r.efectividad }}%</td>

        <!-- Prioridad -->
        <td>{{ r.baja }}</td>
        <td>{{ r.media }}</td>
        <td>{{ r.alta }}</td>

        <!-- Categorías -->
        <td>{{ r.red }}</td>
        <td>{{ r.computo }}</td>
        <td>{{ r.menores }}</td>
        <td>{{ r.software }}</td>
        <td>{{ r.diseno }}</td>
      </tr>
    </tbody>
  </table>
</div>
<hr />

<h3>Acumulado</h3>

<table class="resumen-table">
  <thead>
    <tr>
      <th rowspan="2">Usuario</th>
      <th rowspan="2">Total</th>
      <th rowspan="2">Cerrados</th>
      <th rowspan="2">Efectividad</th>
      <th colspan="3">Prioridad</th>
      <th colspan="5">Atención en</th>
    </tr>
    <tr>
      <th>Baja</th>
      <th>Media</th>
      <th>Alta</th>
      <th>Redes</th>
      <th>Cómputo</th>
      <th>Atenciones Menores</th>
      <th>Software</th>
      <th>Diseño</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let r of acumulado">
      <td data-label="Usuario">{{ r.usuario }}</td>
      <td data-label="Total">{{ r.total }}</td>
      <td data-label="Cerrados">{{ r.cerrados }}</td>
      <td data-label="Efectividad">{{ r.efectividad }}%</td>

      <td data-label="Baja">{{ r.baja }}</td>
      <td data-label="Media">{{ r.media }}</td>
      <td data-label="Alta">{{ r.alta }}</td>

      <td data-label="Redes">{{ r.red }}</td>
      <td data-label="Cómputo">{{ r.computo }}</td>
      <td data-label="Atenciones Menores">{{ r.menores }}</td>
      <td data-label="Software">{{ r.software }}</td>
      <td data-label="Diseño">{{ r.diseno }}</td>
    </tr>
  </tbody>
</table>
